<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HomesInvest Plots & Building Solutions</title>
  <meta name="description" content="HomesInvest — Plots for sale in Kitengela, Isinya and other locations with flexible building solutions and loan calculator (20/30/50% deposit; 12/24/36 months). Contact sales@homesinvest.net" />
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{--brand:#d82b2b;--muted:#666;--bg:#f7f7f9;--card:#fff}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;line-height:1.4;margin:0;background:var(--bg);color:#111}
    header{background:linear-gradient(90deg,var(--brand),#ff5e5e);color:#fff;padding:32px 20px}
    .container{max-width:1100px;margin:0 auto;padding:20px}
    .hero{display:flex;gap:24px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .hero h1{margin:0;font-size:28px}
    .hero p{margin:6px 0 0;color:rgba(255,255,255,0.95)}
    .contacts{margin-top:8px;font-size:14px;}
    .contacts a{color:#fff;text-decoration:underline;}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;margin-top:12px}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(22,22,22,0.06)}
    .price{font-weight:700;color:var(--brand);font-size:18px}
    .muted{color:var(--muted);font-size:13px}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:0;background:var(--brand);color:#fff;text-decoration:none;cursor:pointer}
    .btn.secondary{background:#3b82f6}
    .flex{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .searchbar{display:flex;gap:8px;flex-wrap:wrap}
    input,select{padding:8px;border-radius:8px;border:1px solid #ddd}
    .location-image{
      width:100%;height:160px;object-fit:cover;border-radius:12px;margin-top:8px;
      box-shadow: 0 4px 8px rgb(0 0 0 / 0.1);
    }
    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:1000;}
    .modal{width:100%;max-width:900px;background:var(--card);border-radius:12px;padding:18px;box-shadow:0 10px 30px rgba(10,10,10,0.18);max-height:90vh;overflow-y:auto;}
    .modal header{display:flex;justify-content:space-between;align-items:center}
    .cols{display:grid;grid-template-columns:1fr 360px;gap:16px}
    .plot-preview{height:220px;border-radius:8px;background:linear-gradient(180deg,#e9eefc,#fff);display:flex;align-items:center;justify-content:center;color:#334;padding:12px;font-weight:700;}
    table{width:100%;border-collapse:collapse}
    table td{padding:6px;border-bottom:1px dashed #eee}
    .small{font-size:13px;color:#333}
    /* Responsive */
    @media (max-width:880px){.cols{grid-template-columns:1fr}}
    footer{padding:30px 0;color:#666;text-align:center;font-size:14px;}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="hero">
        <div>
          <h1>HomesInvest Plots & Building Solutions</h1>
          <p>Your trusted partner for plots, building solutions and flexible financing.</p>
          <div class="contacts">
            <strong>Contact us:</strong> 
            <a href="tel:+254769485093">076 948 5093</a> · 
            <a href="tel:+254759222512">075 922 2512</a> · 
            Email: <a href="mailto:sales@homesinvest.net">sales@homesinvest.net</a><br>
            Visit us: <a href="https://homesinvest.net" target="_blank" rel="noopener">https://homesinvest.net</a>
          </div>
        </div>
        <div class="flex" style="gap:10px;flex-wrap:wrap;">
          <a class="btn" href="#listings">View Plots</a>
          <a class="btn secondary" href="https://homesinvest.net" target="_blank" rel="noopener">Visit Website</a>
        </div>
      </div>
    </div>
  </header>

  <main class="container">

    <!-- Sales charts -->
    <section class="card" style="margin-top:-40px;">
      <h3 style="margin:0 0 12px">Sales Overview</h3>
      <canvas id="salesChart" height="140"></canvas>
      <div style="display:flex;gap:8px;margin-top:12px;align-items:center">
        <label class="muted small">Year:</label>
        <select id="yearSelect">
          <option value="2024">2024</option>
          <option value="2025" selected>2025</option>
        </select>
        <button class="btn secondary" id="refreshBtn">Refresh Data</button>
      </div>
    </section>

    <!-- Highlighted Locations -->
    <section style="margin-top:28px;">
      <h2>Featured Plots by Location</h2>
      <div class="grid">
        <div class="card">
          <h4>Kitengela - Aerial View</h4>
          <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=60" alt="Kitengela aerial view" class="location-image" />
          <p class="muted small">Beautiful plots near Kitengela, perfect for investment and future homes.</p>
        </div>
        <div class="card">
          <h4>Isinya - Aerial View</h4>
          <img src="https://images.unsplash.com/photo-1504384308090-c894fdcc538d?auto=format&fit=crop&w=600&q=60" alt="Isinya aerial view" class="location-image" />
          <p class="muted small">Serene plots in Isinya with great potential for building your dream home.</p>
        </div>
      </div>
    </section>

    <!-- Filters -->
    <section style="margin-top:28px;display:flex;gap:12px;align-items:center;justify-content:space-between">
      <div class="searchbar">
        <input id="searchInput" placeholder="Search by location or id" />
        <select id="filterCounty"><option value="">All counties</option><option>Nairobi</option><option>Kisumu</option><option>Mombasa</option><option>Kitengela</option><option>Isinya</option></select>
        <select id="sortBy"><option value="priceAsc">Price low→high</option><option value="priceDesc">Price high→low</option><option value="areaDesc">Area large→small</option></select>
      </div>
      <div class="muted small">Showing <span id="listingCount">0</span> plots</div>
    </section>

    <!-- Listings -->
    <section id="listings" class="grid" style="margin-top:12px">
      <!-- dynamically populated cards -->
    </section>

    <!-- Modal: Building solutions & loan calculator -->
    <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle" tabindex="-1">
      <div class="modal">
        <header>
          <h3 id="modalTitle">Plot — 001</h3>
          <div><button id="closeModal" class="btn" aria-label="Close modal">Close</button></div>
        </header>
        <div class="cols" style="margin-top:12px">
          <div>
            <div class="plot-preview" id="modalPreview">Plot preview</div>
            <p class="small muted" id="modalDesc">Description and location</p>
            <h4 style="margin-top:10px">Available Building Solutions</h4>
            <div id="solutionsList"></div>
          </div>

          <aside class="card" style="padding:12px">
            <h4 style="margin:0 0 8px">Loan Calculator</h4>

            <label class="small" for="calcPrice">Plot price (KES)</label>
            <input id="calcPrice" type="number" value="1000000" min="0" />

            <div style="margin-top:8px">
              <label class="small">Deposit</label>
              <div class="flex" style="margin-top:6px" role="radiogroup" aria-label="Select deposit percentage">
                <label><input type="radio" name="deposit" value="20" checked/> 20%</label>
                <label><input type="radio" name="deposit" value="30" style="margin-left:6px"/> 30%</label>
                <label><input type="radio" name="deposit" value="50" style="margin-left:6px"/> 50%</label>
              </div>
            </div>

            <div style="margin-top:8px">
              <label class="small" for="installments">Installments</label>
              <select id="installments" aria-label="Installment period">
                <option value="12">12 months</option>
                <option value="24">24 months</option>
                <option value="36">36 months</option>
              </select>
            </div>

            <div style="margin-top:8px">
              <label class="small" for="annualRate">Annual interest rate (%)</label>
              <input id="annualRate" type="number" value="10" min="0" step="0.1" />
            </div>

            <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
              <button id="calcBtn" class="btn">Calculate</button>
              <button id="bookBtn" class="btn secondary">Book Plot</button>
            </div>

            <div id="calcResults" style="margin-top:12px" aria-live="polite"></div>
          </aside>
        </div>
      </div>
    </div>

  </main>

  <footer class="container">
    <div class="card" style="text-align:center">
      <p style="margin:6px 0">Contact: 076 948 5093 · 075 922 2512 · Email: <a href="mailto:sales@homesinvest.net">sales@homesinvest.net</a> · <a href="https://homesinvest.net" target="_blank" rel="noopener">https://homesinvest.net</a></p>
      <p style="margin:6px 0">© HomesInvest Plots & Building Solutions — All rights reserved</p>
    </div>
  </footer>

  <script>
    /* ======= Sample dataset of plots ======= */
    const plots = [
      {id:'PL-001',title:'Valley Ridge Plot',county:'Nairobi',area:400,price:1500000,desc:'Near main road, serviced( water + power )',imageColor:'#e9f2ff'},
      {id:'PL-002',title:'Lakeside Plot',county:'Kisumu',area:600,price:2200000,desc:'Scenic views, 5km from town',imageColor:'#fff0f0'},
      {id:'PL-003',title:'Coastline Plot',county:'Mombasa',area:500,price:1800000,desc:'Close to beach, good investment',imageColor:'#f8ffe9'},
      {id:'PL-004',title:'Greenfield',county:'Nairobi',area:250,price:900000,desc:'Affordable starter plot',imageColor:'#fff7e6'},
      {id:'PL-005',title:'Hilltop Estate',county:'Nairobi',area:800,price:4200000,desc:'Premium plot with views',imageColor:'#f0f7ff'},
      {id:'PL-006',title:'Kitengela Green',county:'Kitengela',area:350,price:1300000,desc:'Close to town, peaceful neighborhood',imageColor:'#e0ffe7'},
      {id:'PL-007',title:'Isinya Valley',county:'Isinya',area:550,price:2100000,desc:'Quiet area with scenic views',imageColor:'#f0fff0'}
    ];

    /* Render listings */
    const listingsEl = document.getElementById('listings');
    function renderListings(dataset){
      listingsEl.innerHTML='';
      dataset.forEach(p=>{
        const el = document.createElement('div');el.className='card';
        el.innerHTML = `
          <div style="display:flex;gap:12px;align-items:center">
            <div style="width:88px;height:66px;border-radius:8px;background:${p.imageColor};display:flex;align-items:center;justify-content:center;font-weight:700;color:#444">${p.id}</div>
            <div style="flex:1">
              <div style="display:flex;justify-content:space-between;align-items:start">
                <div>
                  <div style="font-weight:700">${p.title}</div>
                  <div class="muted small">${p.county} · ${p.area} m²</div>
                </div>
                <div style="text-align:right">
                  <div class="price">KES ${numberWithCommas(p.price)}</div>
                  <div class="muted small">${p.id}</div>
                </div>
              </div>
            </div>
          </div>
          <div style="margin-top:10px;display:flex;gap:8px;justify-content:flex-end">
            <button class="btn" onclick="openModal('${p.id}')">Building solutions</button>
            <button class="btn secondary" onclick="quickCalc(${p.price})">Quick calculate</button>
          </div>
        `;
        listingsEl.appendChild(el);
      });
      document.getElementById('listingCount').textContent = dataset.length;
    }
    renderListings(plots);

    function numberWithCommas(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}

    /* ======= Modal behaviour & dynamic content ======= */
    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');
    const modalPreview = document.getElementById('modalPreview');
    const solutionsList = document.getElementById('solutionsList');
    const calcPrice = document.getElementById('calcPrice');
    const calcResults = document.getElementById('calcResults');

    function openModal(id){
      const p = plots.find(x=>x.id===id);
      if(!p) return;
      modalBackdrop.style.display='flex';
      modalTitle.textContent = `${p.title} — ${p.id}`;
      modalDesc.textContent = p.desc + ' · ' + p.county + ' · ' + p.area + ' m²';
      modalPreview.style.background = `linear-gradient(180deg, ${p.imageColor}, #fff)`;
      modalPreview.textContent = p.title;
      calcPrice.value = p.price;

      // Building solutions presets (example):
      const solutions = [
        {id:'sol-basic',name:'Foundation + Shell (Basic)',cost: p.area*2000,desc:'Basic foundation + shell structure (no finishes)'},
        {id:'sol-standard',name:'Standard Build',cost:p.area*3500,desc:'Foundation, shell, roofing and basic finishes'},
        {id:'sol-premium',name:'Premium Finish',cost:p.area*6000,desc:'High-end finishes, fixtures and landscaping'}
      ];
      solutionsList.innerHTML = '';
      solutions.forEach(s=>{
        const row = document.createElement('div');
        row.style.marginBottom='8px';
        row.innerHTML = `<label><input type="checkbox" data-cost="${s.cost}" class="solutionCheckbox"/> <strong>${s.name}</strong> — KES ${numberWithCommas(s.cost)}<div class="muted small">${s.desc}</div></label>`;
        solutionsList.appendChild(row);
      });

      // clear results
      calcResults.innerHTML='';
    }
    document.getElementById('closeModal').addEventListener('click',()=>modalBackdrop.style.display='none');
    modalBackdrop.addEventListener('click',(e)=>{if(e.target===modalBackdrop)modalBackdrop.style.display='none'});

    /* Quick calculate - prefill calculator and show modal */
    function quickCalc(price){
      calcPrice.value = price;
      openModal(plots[0].id);
    }

    /* ======= Loan calculator logic ======= */
    function calculateLoan({price,depositPercent,months,annualRate,extraCosts=0}){
      // deposit amount
      const deposit = price * (depositPercent/100);
      const principal = Math.max(0
